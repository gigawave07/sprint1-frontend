<!--			form-->
<div class="container-fluid ml-lg-5 mr-lg-5 px-lg-0 mx-lg-0">
	<div class="search-form">
		<div class="form-title">
			<h2><b>TÌM KIẾM ĐẶT CHỖ</b></h2>
			
		</div>
		
		<form action="" class="form-group" [formGroup]="formTicketSearchDTO">
			<h5 *ngIf="isEmptyTicketList" class="text-danger text-center">Không tìm thấy mã đặt chỗ. Vui lòng kiểm tra lại thông tin tìm kiếm.</h5>
<!--			<h5 *ngIf="message=='error searchPendingTicket'" class="text-danger text-center">Lỗi tìm kiếm</h5>-->
			<div class="row">
				<div class="col-12 ">
					<div class="d-flex justify-content-center">
						<mat-form-field>
							<mat-label>Tìm kiếm theo</mat-label>
							<mat-select formControlName="searchBy" [(value)]="searchByValue">
								<mat-option value="bookingCode">Mã đặt chỗ</mat-option>
								<mat-option value="phoneNumber">Số điện thoại</mat-option>
							</mat-select>
							<mat-error
								*ngIf="formTicketSearchDTO.get('searchBy').errors?.required &&
										formTicketSearchDTO.get('searchBy').touched"
								class="text-danger">Vui lòng không để trống
							</mat-error>
						</mat-form-field>
					</div>
				</div>
			</div>
			<div class="row" *ngIf="searchByValue!=null">
				<div class="col-12 ">
					<div class="d-flex justify-content-center">
						<mat-form-field>
							<mat-label *ngIf="searchByValue== 'bookingCode'">Mã đặt chỗ</mat-label>
							<mat-label *ngIf="searchByValue== 'phoneNumber'">Số điện thoại</mat-label>
							<input matInput formControlName="searchValue">
							<mat-error
								*ngIf="formTicketSearchDTO.get('searchValue').errors?.required &&
										formTicketSearchDTO.get('searchValue').touched"
								class="text-danger">Vui lòng không để trống
							</mat-error>
						</mat-form-field>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-12">
					<div class="d-flex justify-content-center">
						<button class="btn btn-success" (click)="searchPendingTicket()"
						        [disabled]="formTicketSearchDTO.invalid"
						> Tìm kiếm
						</button>
					
					</div>
				</div>
			</div>
		</form>
	</div>
	
	
	<div class="table-responsive" *ngIf="ticketList.length !== 0;">
		<div class="table-wrapper">
			<div class="table-title">
				<div class="row">
					<div class="col-12">
						<h2><b>KẾT QUẢ TÌM KIẾM</b></h2>
						
					</div>
				</div>
			</div>
			<table class="table table-striped table-hover">
				<thead>
				<tr>
					
					<th>Mã đặt chỗ</th>
					<th>Mã vé</th>
					<th>Nơi đi</th>
					<th>Nơi đến</th>
					<th>Ngày đặt</th>
					<th>Ngày bay</th>
					<th>Giá</th>
					<th>Huỷ</th>
					<th>
						Chọn
					</th>
				</tr>
				</thead>
				<tbody>
				<tr *ngFor="let index = index;let ticket of ticketList| paginate: { itemsPerPage: pageSize, currentPage: pageNumber }">
					<td>{{ticket.booking.bookingCode}}</td>
					<td>{{ticket.ticketCode}}</td>
<!--					<td *ngIf="pageNumber==1">{{ticket.ticketCode}} {{index}}</td>-->
<!--					<td *ngIf="pageNumber>1">{{ticket.ticketCode}} {{(pageNumber-1)*pageSize+index}}</td>-->
					<td>{{ticket.flightInformation.departure}}</td>
					<td>{{ticket.flightInformation.arrival}}</td>
					<td>{{ticket.booking.bookingDate}}</td>
					<td>{{ticket.flightInformation.departureDate}}</td>
					<td id="flightInformationPrice">{{ticket.flightInformation.price}}</td>
					<td>
						<button (click)="openCancelDialogTicket(ticket)" class="btn btn-danger">
							Huỷ
						</button>
					</td>
					<td>
						<span class="custom-checkbox">
							<input *ngIf="pageNumber==1" type="checkbox"
							       (change)="onCheckboxChange($event,ticket,index)"
							       [checked]="checked[index]"
							       [ngModel]="checked[index]"
							>
							<input *ngIf="pageNumber>1" type="checkbox"
							       (change)="onCheckboxChange($event,ticket,(pageNumber-1)*pageSize+index)"
							       [checked]="checked[(pageNumber-1)*pageSize+index]"
							       [ngModel]="checked[(pageNumber-1)*pageSize+index]"
							>
							<label></label>
						</span>
					</td>
				</tr>
				</tbody>
			</table>
			<div class="clearfix">
				<pagination-controls (pageChange)="pageNumber = $event"></pagination-controls>
			</div>
		</div>
	</div>
	
	<div class="row mt-3">
		<div [hidden]="hiddenPaypalButton"
		     class="paypal ml-lg-5 ml-md-5" style="width: 100px" #paypalRef></div>
	</div>
	
	<!--pay ticket-->
	<div class="row col-12">
		<div id="paypalStatusPayment" (click)="setTicketStatusPaymentToPaid()"></div>
	</div>

</div>



